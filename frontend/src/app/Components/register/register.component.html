<div class="registration-container">
    <div class="card registration-card">
        <div class="card-header">
            <h2>Create Account</h2>
            <p>Welcome! Please fill in the details to get started.</p>
        </div>
        <div class="card-body">
            <form id="registrationForm" [formGroup]="registrationForm" (ngSubmit)="onSubmit()">
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="firstName" class="form-label">First Name <span class="required">*</span></label>
                            <input
                              type="text"
                              class="form-control"
                              id="firstName"
                              name="firstName"
                              placeholder="Enter your first name"
                              formControlName="firstName"
                              [class.is-invalid]="registrationForm.get('firstName')?.invalid && (registrationForm.get('firstName')?.dirty || registrationForm.get('firstName')?.touched)"
                              [class.is-valid]="registrationForm.get('firstName')?.valid && (registrationForm.get('firstName')?.dirty || registrationForm.get('firstName')?.touched)"
                            >
                            <div class="invalid-feedback" *ngIf="registrationForm.get('firstName')?.invalid && (registrationForm.get('firstName')?.dirty || registrationForm.get('firstName')?.touched)">
                                <div *ngIf="registrationForm.get('firstName')?.errors?.['required']">
                                    <i class="fas fa-exclamation-circle me-1"></i>First name is required
                                </div>
                                <div *ngIf="registrationForm.get('firstName')?.errors?.['minlength']">
                                    <i class="fas fa-exclamation-circle me-1"></i>First name must be at least 3 characters long
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="lastName" class="form-label">Last Name <span class="required">*</span></label>
                            <input
                              type="text"
                              class="form-control"
                              id="lastName"
                              name="lastName"
                              placeholder="Enter your last name"
                              formControlName="lastName"
                              [class.is-invalid]="registrationForm.get('lastName')?.invalid && (registrationForm.get('lastName')?.dirty || registrationForm.get('lastName')?.touched)"
                              [class.is-valid]="registrationForm.get('lastName')?.valid && (registrationForm.get('lastName')?.dirty || registrationForm.get('lastName')?.touched)"
                            >
                            <div class="invalid-feedback" *ngIf="registrationForm.get('lastName')?.invalid && (registrationForm.get('lastName')?.dirty || registrationForm.get('lastName')?.touched)">
                                <div *ngIf="registrationForm.get('lastName')?.errors?.['required']">
                                    <i class="fas fa-exclamation-circle me-1"></i>Last name is required
                                </div>
                                <div *ngIf="registrationForm.get('lastName')?.errors?.['minlength']">
                                    <i class="fas fa-exclamation-circle me-1"></i>Last name must be at least 3 characters long
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="email" class="form-label">Email Address <span class="required">*</span></label>
                            <input
                              type="email"
                              class="form-control"
                              id="email"
                              name="email"
                              placeholder="Enter your email"
                              formControlName="email"
                              [class.is-invalid]="registrationForm.get('email')?.invalid && (registrationForm.get('email')?.dirty || registrationForm.get('email')?.touched)"
                              [class.is-valid]="registrationForm.get('email')?.valid && (registrationForm.get('email')?.dirty || registrationForm.get('email')?.touched)"
                            >
                            <div class="invalid-feedback" *ngIf="registrationForm.get('email')?.invalid && (registrationForm.get('email')?.dirty || registrationForm.get('email')?.touched)">
                                <div *ngIf="registrationForm.get('email')?.errors?.['required']">
                                    <i class="fas fa-exclamation-circle me-1"></i>Email address is required
                                </div>
                                <div *ngIf="registrationForm.get('email')?.errors?.['email']">
                                    <i class="fas fa-exclamation-circle me-1"></i>Please enter a valid email address
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="country" class="form-label">Country <span class="required">*</span></label>
                            <input
                              type="text"
                              class="form-control"
                              id="country"
                              name="country"
                              formControlName="country"
                              [class.is-invalid]="registrationForm.get('country')?.invalid && (registrationForm.get('country')?.dirty || registrationForm.get('country')?.touched)"
                              [class.is-valid]="registrationForm.get('country')?.valid && (registrationForm.get('country')?.dirty || registrationForm.get('country')?.touched)"

                              >
                            <div class="invalid-feedback" *ngIf="registrationForm.get('country')?.invalid && (registrationForm.get('country')?.dirty || registrationForm.get('country')?.touched)">
                                <div *ngIf="registrationForm.get('country')?.errors?.['required']">
                                    <i class="fas fa-exclamation-circle me-1"></i>Please select your country
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="role" class="form-label">Role <span class="required">*</span></label>
                            <select
                              class="form-select"
                              id="role"
                              name="role"
                              formControlName="role"
                              [class.is-invalid]="registrationForm.get('role')?.invalid && (registrationForm.get('role')?.dirty || registrationForm.get('role')?.touched)"
                              [class.is-valid]="registrationForm.get('role')?.valid && (registrationForm.get('role')?.dirty || registrationForm.get('role')?.touched)"
                            >
                                <option value="">Select your role</option>
                                <option value="OWNER">OWNER</option>
                                <option value="TENANT">TENANT</option>
                            </select>
                            <div class="invalid-feedback" *ngIf="registrationForm.get('role')?.invalid && (registrationForm.get('role')?.dirty || registrationForm.get('role')?.touched)">
                                <div *ngIf="registrationForm.get('role')?.errors?.['required']">
                                    <i class="fas fa-exclamation-circle me-1"></i>Please select your role
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="password" class="form-label">Password <span class="required">*</span></label>
                            <input
                              type="password"
                              class="form-control"
                              id="password"
                              name="password"
                              placeholder="Enter your password"
                              formControlName="password"
                              [class.is-invalid]="registrationForm.get('password')?.invalid && (registrationForm.get('password')?.dirty || registrationForm.get('password')?.touched)"
                              [class.is-valid]="registrationForm.get('password')?.valid && (registrationForm.get('password')?.dirty || registrationForm.get('password')?.touched)"
                            >
                            <div class="invalid-feedback" *ngIf="registrationForm.get('password')?.invalid && (registrationForm.get('password')?.dirty || registrationForm.get('password')?.touched)">
                                <div *ngIf="registrationForm.get('password')?.errors?.['required']">
                                    <i class="fas fa-exclamation-circle me-1"></i>Password is required
                                </div>
                                <div *ngIf="registrationForm.get('password')?.errors?.['minlength']">
                                    <i class="fas fa-exclamation-circle me-1"></i>Password must be at least 5 characters long
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="phone" class="form-label">Phone number <span class="required">*</span></label>
                            <input
                              type="phone"
                              class="form-control"
                              id="phone"
                              name="phone"
                              placeholder="Enter your phone number"
                              formControlName="phone"
                              [class.is-invalid]="registrationForm.get('phone')?.invalid && (registrationForm.get('phone')?.dirty || registrationForm.get('phone')?.touched)"
                              [class.is-valid]="registrationForm.get('phone')?.valid && (registrationForm.get('phone')?.dirty || registrationForm.get('phone')?.touched)"
                            >
                        </div>
                    </div>
                </div>

                <button
                  type="submit"
                  class="btn btn-register"
                  [disabled]="registrationForm.invalid"
                >
                    <i class="fas fa-user-plus me-2"></i>Create Account
                </button>
                <div class="mt-3 text-center">
                  <p class="mb-2" id="quest" >Already have an account?</p>
                  <a href="/login"><button type="button" class="btn btn-login-redirect">
                      <i class="fas fa-sign-in-alt me-2"></i>Sign In
                  </button></a>
                </div>

                <div class="alert alert-danger mt-3" *ngIf="registrationForm.invalid && registrationForm.touched">
                    <h6><i class="fas fa-exclamation-triangle me-2"></i>Please fix the following errors:</h6>
                    <ul class="mb-0">
                        <li *ngIf="registrationForm.get('firstName')?.errors?.['required']">First name is required</li>
                        <li *ngIf="registrationForm.get('firstName')?.errors?.['minlength']">First name must be at least 3 characters</li>
                        <li *ngIf="registrationForm.get('lastName')?.errors?.['required']">Last name is required</li>
                        <li *ngIf="registrationForm.get('lastName')?.errors?.['minlength']">Last name must be at least 3 characters</li>
                        <li *ngIf="registrationForm.get('email')?.errors?.['required']">Email is required</li>
                        <li *ngIf="registrationForm.get('email')?.errors?.['email']">Valid email is required</li>
                        <li *ngIf="registrationForm.get('country')?.errors?.['required']">Country selection is required</li>
                        <li *ngIf="registrationForm.get('role')?.errors?.['required']">Role selection is required</li>
                        <li *ngIf="registrationForm.get('password')?.errors?.['required']">Password is required</li>
                        <li *ngIf="registrationForm.get('password')?.errors?.['minlength']">Password must be at least 5 characters</li>
                    </ul>
                </div>
            </form>
        </div>
    </div>
</div>
